<!DOCTYPE html>
<html lang="en">
<head>
  <title>Location Routing - Bus Transportaion System</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="logo.png" type="image/x-icon">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.20.0/font/bootstrap-icons.css" rel="stylesheet">

<!-- Ionicons -->
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
  <style>
    /* Remove the navbar's default margin-bottom and rounded borders */ 
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
    }
    
    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {height: 1050px}
    
    /* Set gray background color and 100% height */
    .sidenav {
      padding-top: 20px;
      background-color: #f1f1f1;
      height: 100%;
    }
    
    /* Set black background color, white text and some padding */
    .footer-dark {
  padding:50px 0;
  color:#f0f9ff;
  background-color:#282d32;
}

.footer-dark h3 {
  margin-top:0;
  margin-bottom:12px;
  font-weight:bold;
  font-size:16px;
}

.footer-dark ul {
  padding:0;
  list-style:none;
  line-height:1.6;
  font-size:14px;
  margin-bottom:0;
}

.footer-dark ul a {
  color:inherit;
  text-decoration:none;
  opacity:0.6;
}

.footer-dark ul a:hover {
  opacity:0.8;
}

@media (max-width:767px) {
  .footer-dark .item:not(.social) {
    text-align:center;
    padding-bottom:20px;
  }
}

.footer-dark .item.text {
  margin-bottom:36px;
}

@media (max-width:767px) {
  .footer-dark .item.text {
    margin-bottom:0;
  }
}

.footer-dark .item.text p {
  opacity:0.6;
  margin-bottom:0;
}

.footer-dark .item.social {
  text-align:center;
}

@media (max-width:991px) {
  .footer-dark .item.social {
    text-align:center;
    margin-top:20px;
  }
}

.footer-dark .item.social > a {
  font-size:20px;
  width:36px;
  height:36px;
  line-height:36px;
  display:inline-block;
  text-align:center;
  border-radius:50%;
  box-shadow:0 0 0 1px rgba(255,255,255,0.4);
  margin:0 8px;
  color:#fff;
  opacity:0.75;
}

.footer-dark .item.social > a:hover {
  opacity:0.9;
}

.footer-dark .copyright {
  text-align:center;
  padding-top:24px;
  opacity:0.3;
  font-size:13px;
  margin-bottom:0;
}
    
    /* On small screens, set height to 'auto' for sidenav and grid */
    @media screen and (max-width: 767px) {
      .sidenav {
        height: auto;
        padding: 15px;
      }
      .row.content {height:auto;} 
    }

    /* Set the height of the map container */
    #map {
      width: 100%;
      height: 80vh;
    }

    /* Add some margin to the paragraph */
    .custom-paragraph {
      margin-top: 20px;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="indes.html">BUs Transportation</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Shedule</a></li>
        <li><a href="#">Reminders</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
      </ul>
    </div>
  </div>
</nav>
  
<div class="container-fluid text-center">    
  <div class="row content">
    <!-- Sidebar -->
<div class="col-sm-2 sidenav">
    <nav id="sidebar">
        <div class="list-group">
            <a href="#" class="list-group-item">Shedules</a>
            <a href="#" class="list-group-item">Feedback</a>
            <a href="#" class="list-group-item">services</a>
        </div>
    </nav>
</div>
<!-- Sidebar -->

    <div class="col-sm-8 text-left"> 
      <h1>Location History</h1>
      
      <hr>
      <h3>Test</h3>

      <!-- Add a container for the map -->
      <div id="map"></div>

      <!-- Add a paragraph with some gap -->
      <p class="custom-paragraph">
        <p>
          Location routing involves finding the optimal path or route between two or more locations on a map,
          taking into account various factors such as distance, travel time, traffic conditions,
          and sometimes additional preferences or constraints.
          This process is commonly used in applications like mapping services, navigation systems, and 
          logistics to help users plan efficient routes between specific points of interest.
        </p>
        <p>Map Display: The calculated route is then displayed on a map, often accompanied by additional information such as turn-by-turn directions, estimated travel time, and distance. Interactive maps allow users to visualize the entire route or focus on specific segments.</p>
        <p>Real-Time Updates: In some applications, real-time traffic data may be used to dynamically adjust the route based on current road conditions. This helps users avoid traffic congestion and unexpected delays.</p>
        <p><h1Navigation Guidance:></h1Navigation> Navigation systems may provide turn-by-turn instructions to guide users along the calculated route. This guidance typically includes information about upcoming turns, street names, and distance to the next maneuver.</p>
      </div>
    </div>
    

    <div class="footer-dark">
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-3 item">
                        <h3>Services</h3>
                        <ul>
                            <li><a href="#">Tracking</a></li>
                            <li><a href="#">Location history</a></li>
                            <li><a href="#">Fleet shedules</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <h3>About</h3>
                        <ul>
                            <li><a href="#">Company</a></li>
                            <li><a href="#">Team</a></li>
                            <li><a href="#">contact</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6 item text">
                        <h3>Bus Transportation System</h3>
                        <p>Track the real-time location of buses, location history, database and others management activies.</p>
                    </div>
                    <div class="col item social">
                        <a href="#"><i class="icon ion-social-facebook"></i></a> <!-- Bootstrap Icons - Facebook -->
                        <a href="#"><i class="icon ion-social-twitter"></i></a> <!-- Bootstrap Icons - Twitter -->
                        <a href="#"><i class="icon ion-social-snapchat"></i></a> <!-- Ionicons - Snapchat -->
                        <a href="#"><i class="icon ion-social-instagram"></i></a> <!-- Ionicons - Instagram -->
                      </div>
                      
                </div>
                <p class="copyright">Bus Transportation Â© 2024</p>
            </div>
        </footer>
    </div>

    <script>
        var map = L.map('map').setView([14.505042723816718, 79.98847889878718], 10);
        mapLink = "<a href='http://openstreetmap.org'>OpenStreetMap</a>";
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: 'Leaflet &copy; ' + mapLink + ', contribution', maxZoom: 18 }).addTo(map);
    
        var taxiIcon = L.icon({
          iconUrl: 'bus.png',
          iconSize: [70, 70]
        })
    
        var waypoints = [];
    
        map.on('click', function (e) {
          if (waypoints.length < 5) {
            console.log(e);
            var newMarker = L.marker([e.latlng.lat, e.latlng.lng], { icon: taxiIcon }).addTo(map);
            waypoints.push(L.latLng(e.latlng.lat, e.latlng.lng));
    
            if (waypoints.length > 1) {
              L.Routing.control({
                waypoints: waypoints,
                routeWhileDragging: false,  // Disable popup during dragging
                show: false  // Do not show the control
              }).on('routesfound', function (e) {
                var routes = e.routes;
                console.log(routes);
    
                e.routes[0].coordinates.forEach(function (coord, index) {
                  setTimeout(function () {
                    newMarker.setLatLng([coord.lat, coord.lng]);
                  }, 100 * index);
                });
    
              }).addTo(map);
            }
          } else {
            console.log('Maximum waypoints reached. Cannot add more.');
          }
        });
    
        // Get user's current location using Geolocation API
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function (position) {
            var userLatLng = L.latLng(position.coords.latitude, position.coords.longitude);
            map.setView(userLatLng, 15);
            var userMarker = L.marker(userLatLng, { icon: taxiIcon }).addTo(map);
            waypoints.push(userLatLng);
          }, function (error) {
            console.error('Error getting user location:', error.message);
          });
        } else {
          console.error('Geolocation is not supported by this browser.');
        }
    </script>
    



</body>
</html>